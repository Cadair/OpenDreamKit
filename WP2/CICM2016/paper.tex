\documentclass{llncs}
\pagestyle{plain}
\usepackage[show]{ed}
\usepackage{listings}
% \usepackage{url}
% \usepackage{wrapfig}
\usepackage{xspace}
\usepackage{hyperref}
\usepackage{stex-logo}

\usepackage[style=alphabetic,backend=bibtex]{biblatex}
\addbibresource{kwarc.bib}
\def\pn{OpenDreamKit\xspace}
\title{The OpenDreamKit Project:\\
  Towards Enhanced Interoperability\\
  via a Math-in-the-Middle Approach}
\author{Michael Kohlhase\inst{1} Nicolas M. Thi\'ery\inst{2} }
\institute{Jacobs University, Bremen, Germany \and Universit\'e Paris-Sud, Paris, France}

\newcommand{\OOMMFNB}{OOMMF-NB\xspace}
\newcommand{\VRE}{VRE\xspace}
\newcommand{\VREs}{VRE\xspace}
\newcommand{\software}[1]{\textsc{#1}\xspace}
\newcommand{\GAP}{\software{GAP}}
\newcommand{\HPCGAP}{\software{HPC-GAP}}
\newcommand{\libGAP}{\software{libGAP}}
\newcommand{\Singular}{\software{Singular}}
\newcommand{\Sage}{\software{Sage}}
\newcommand{\SageCombinat}{\software{Sage-Combinat}}
\newcommand{\MuPADCombinat}{\software{MuPAD-Combinat}}
\newcommand{\Sphinx}{\software{Sphinx}}
\newcommand{\SCSCP}{\software{SCSCP}}
\newcommand{\Python}{\software{Python}}
\newcommand{\IPython}{\software{IPython}}
\newcommand{\Jupyter}{\software{Jupyter}}
\newcommand{\Cython}{\software{Cython}}
\newcommand{\Pythran}{\software{Pythran}}
\newcommand{\Numpy}{\software{Numpy}}
\newcommand{\Pari}{\software{PARI}}
\newcommand{\PariGP}{\software{PARI/GP}}
\newcommand{\libpari}{\software{libpari}}
\newcommand{\GP}{\software{GP}}
\newcommand{\GPtoC}{\software{GP2C}}
\newcommand{\Linbox}{\software{LinBox}}
\newcommand{\LMFDB}{\software{LMFDB}}
\newcommand{\OpenEdX}{\software{OpenEdX}}
\newcommand{\Linux}{\software{Linux}}
\newcommand{\LATEX}{\software{\LaTeX}}
\newcommand{\SMC}{\software{SageMathCloud}}
\newcommand{\Simulagora}{\software{Simulagora}}
\newcommand{\KANT}{\software{KANT}}
\newcommand{\Magma}{\software{Magma}}
\newcommand{\Mathematica}{\software{Mathematica}}
\newcommand{\Maple}{\software{Maple}}
\newcommand{\Matlab}{\software{Matlab}}
\newcommand{\MuPAD}{\software{MuPAD}}
\newcommand{\MPIR}{\software{MPIR}}
\newcommand{\Arxiv}{\software{arXiv}}
\newcommand{\Givaro}{\software{Givaro}}
\newcommand{\fflas}{\software{fflas}}
\newcommand{\MathHub}{\software{MathHub}}
\newcommand{\FindStat}{\software{FindStat}}
\newcommand{\Mongo}{\software{MongoDB}}
\newcommand\DKS{\ensuremath{\mathcal{DKS}}\xspace}
\newcommand{\ODK}{\software{OpenDreamKit}}


\begin{document}
\maketitle
\begin{abstract}
  \ODK --- ``Open Digital Research Environment Toolkit for the
  Advancement of Mathematics'' --- is an H2020 EU Research
  Infrastructure project that aims at supporting, over the period
  2015--2019, the ecosystem of open-source mathematical software
  systems, and in particular popular tools such as LinBox, MPIR,
  SageMath, GAP, Pari/GP, LMFDB, Singular, MathHub, and the
  IPython/Jupyter interactive computing environment. From that
  ecosystem, OpenDreamKit will deliver a flexible toolkit enabling
  research groups to set up Virtual Research Environments, customised
  to meet the varied needs of research projects in pure mathematics
  and applications.

  An important step in the OpenDreamKit endeavor is to foster the
  interoperability between a variety of systems, ranging from computer
  algebra systems over mathematical databases to front-ends.

  In this paper, we describe the OpenDreamKit project and report on experiments and future
  plans with the \emph{math-in-the-middle} approach.  This information architecture
  consists in a central mathematical ontology that documents the domain and fixes a joint
  vocabulary, combined with specifications of the functionalities of the various
  systems. Interaction between systems can then be enriched by pivoting off this
  information architecture.
\end{abstract}

\section{Suggested restructuring of \emph{Integrating Mathematical Software Systems via the MITM approach} section}

\begin{description}
\item{MMT system}
\item{GAP} 
\begin{itemize}
\item Brief introduction to the GAP type system 
\item Tentative approaches to exporting GAP types 
\item n application: consistency checker for the GAP documentation
\end{itemize}
\item{SAGE} 
\begin{itemize}
\item Short description of Sage's category system 
\item Tentative approach to formalize Sage's categories in MMT 
\item An application: multisystem semantic handle interfaces
\end{itemize}
\item{LMFDB}
\begin{itemize}
\item Short description of LMFDB's goals and implementation 
\item Tentative approach to formalize LMFDB semantics in MMT
\end{itemize}
\end{description}


\section{Towards a Mathematical Virtual Research Environment toolkit}

\ednote{MK@NT: we need a general description here, cite \cite{OpenDreamKit:on,ODKproposal:on}}

\subsection{Context}

\ednote{NT: Needed?}

From their earliest days, computers have been used in pure
mathematics, either to make tables, to prove theorems (famously the
four colour theorem) or, as with the astronomer's telescope, to
explore new theories. Computer aided experiments, and the use of
databases relying on computer calculations such as the Small Groups
Library in GAP, the Modular Atlas in group and representation theory,
or the LMFDB, are now part of the standard toolbox of the pure
mathematician, and certain areas of mathematics completely depend on
it. Computers are also increasingly used to support collaborative work
and education.

The last decades witnessed the emergence of a wide ecosystem of
open-source tools to support research in pure mathematics. This ranges
from specialized to general purpose computational tools such as \GAP,
\PariGP, \Linbox, \MPIR, \Sage, or \Singular, via online databases
like the \LMFDB. Not counting of course online services like the
Wikipedia, \Arxiv, or MathOverflow.

A great opportunity is the rapid emergence of key technologies, and in
particular the \Jupyter (previously \IPython) platform for interactive
and exploratory computing which targets all areas of science.

\subsection{Virtual Research Environments}

Promoting collaborations at all scales is key to further improve the
productivity of researchers in pure mathematics and applications. An
important next step in that direction is that of \emph{Virtual
Research Environments} (VRE), that is online services enabling
groups of researchers, typically widely dispersed, to work
collaboratively on a per project basis.
% , and supporting the entire
% life-cycle of computational work in mathematical research, from
% \emph{initial exploration} to \emph{publication}, \emph{teaching}, and
% \emph{outreach}.

Early VRE's include \SMC, a collaborative online environment
where students, teachers and researchers can create, customize, and
share a project. This project essentially consists in a virtual
machine, with a simple web-based user interface, and ready-to-use
software for interactive computations (e.g.\ \Sage) and authoring
(e.g.\ \LaTeX), with facilities for real-time communication through
chat, video, and shared editing of documents, programs and worksheets.
For education purposes, course material can be provided as worksheets,
assignments can be distributed, collected, and returned as well.

Technically speaking, \SMC is a specific open-source cloud-based
Virtual Research and Teaching Environment for mathematics developed
since 2013 under the lead of William Stein, with funding from the NSF,
and Google's Education Grant program.
\ednote{NT: Mention SageMath, Inc.?}
\ednote{SL: 2016: SageMath, Inc.\ accepted in Google startup program,
see https://twitter.com/wstein389/status/708439137200836608}

It presently hosts over 250,000 projects and has over 30,000 weekly active
users. This fast adoption by a wide variety of users demonstrates the
relevance and the long-term impact this kind of collaborative
environments can have.

\subsection{Motivations}

The \ODK proposal grew out of a reflection on the needs of the (pure)
mathematics community in terms of computational software and
databases. The highly successful development in the last decades of
open-source systems has proven the viability and power of
collaborative open-source development models, by users and for users,
even for delivering general purpose systems targeting a large public
(researchers, teachers, engineers, amateurs, ...).

Yet some critical long term investments, in particular on the
technical side, are in order to boost the productivity and lower the
entry barrier:

\begin{itemize}
\item Streamline access, distribution, portability on a wide range of
  platforms, including High Performance Computers or cloud services.
\item Improve user interfaces, in particular in the promising area of
  collaborative workspaces as those provided by \SMC.
\item Lower barriers between research communities and promote
  dissemination. For example make it easy for a specialist of
  scientific computing to use tools from pure mathematics, and
  reciprocally.
\item Bring together the developers communities to promote tighter
  collaboration and symbiosis, accelerate joint development, and share
  best practices.
\item Outsource as much of the development as possible to larger
  communities to focus the work forces on their core specialty: the
  implementation of mathematical algorithms and databases.
\end{itemize}

Many people in the community have been working really hard on the
above items but crucially lack manpower or funding.

\subsection{\ODK}

The European H2020 call
\href{http://ec.europa.eu/research/participants/portal/desktop/en/opportunities/h2020/topics/2144-einfra-9-2015.html}{EINFRA-9:
  e-Infrastructure for Virtual Research Environment} was a natural fit
to seek for manpower and funding: putting the emphasis on Virtual
Research Environments nicely wraps up all the above needs in a single
mission.

A consortium was built by gathering core European developers of the
aforementioned systems for pure mathematics, and reaching toward the
numerical community, and in particular the \Jupyter community, to work
together on joint needs.
%
Together they answered the call with the \ODK proposal ``Open
Digital Research Environment Toolkit for the Advancement of
Mathematics'' to help address the following aims in close
collaboration with the community:

\begin{itemize}
\item Further improve the productivity of researchers in pure
  mathematics and applications by further promoting collaborations on
  \emph{Data}, \emph{Knowledge}, and \emph{Software}.
\item Make it easy for teams of researchers of any size to set up custom,
  collaborative \emph{Virtual Research Environments} tailored to their
  specific needs, resources, and workflows.
\item Support the entire life-cycle of computational work in
  mathematical research, from \emph{initial exploration} to
  \emph{publication}, \emph{teaching}, and \emph{outreach}.
\end{itemize}

The acceptance of the proposal in May 2015 was a strong sign of
recognition, at the highest level of funding agencies, of the values
of open science and the strength and maturity of the ecosystem.

The \ODK project will run for four years, starting from September
2015. It will provide substantial resources to the open source
computational mathematics ecosystem, and in particular popular tools
such as LinBox, MPIR, SageMath, GAP, Pari/GP, LMFDB, Singular,
MathHub, and the IPython/Jupyter interactive computing environment.

The project involves about 50 people spread over 15 sites in Europe,
with a total budget of about 7.6 million euros. The largest portion of
that will be devoted to employing an average of 11 researchers and
developers working full time on the project. Additionally, the
participants will contribute the equivalent of six other people
working full time.

By definition this project will be mostly funding actions in Europe;
however those actions will be carried out, as usual, in close
collaborations with the worldwide community.

\subsection{Work plan}

\ednote{NT: Not sure how to write up this section; we want to give
  some concrete idea of what's going to happen}

In practice, the \ODK work plan consists in 58 concrete tasks split in
7 work packages:
\begin{itemize}
\item WP1: Project Management
\item WP2: Community Building, Training, Dissemination, Exploitation,
  and Outreach\\
  This work package includes for example the organization of many
  development and training workshops.
\item WP3: Component Architecture\\
  This package includes work on portability, especially on the Windows
  platform,, on modularity and packaging, etc.
\item WP4: User Interfaces\\
    Example: Task4.1: Uniform \Jupyter notebook interface for all interactive components

\item WP5: High Performance Mathematical Computing\\
  In this work package, many 

\item WP6: Data/Knowledge/Software-Bases
\item WP7: Social Aspects
\end{itemize}
The completion of each task is validated by the release or publication
of deliverables. Here are a brief description of a few of those tasks:

\begin{itemize}
\item Identify and extend ontologies and standards to facilitate safe
  and efficient storage, reuse, interoperation and sharing of rich
  mathematical data whilst taking into account of provenance and
  citability
\item data archiving and sharing in a semantically sound way component
  architecture, user interfaces, deployment frameworks and
  standardisation and interoperability of software systems.
\end{itemize}


This work will be backed by research on social aspects of
collaborative software development in mathematics.

% \begin{itemize}
% \item Modularity, packaging, portability, ease of use and install;
% \item Performances, including better support for parallel
%   architectures (HPC, ...);
% \item Integration between computational software and databases;
% \item Long term sustainability.


\subsection{On open proposal writing and management}

An innovative aspect of the \ODK project is that the proposal writing
and management happens, as much as is practical and without infringing
on privacy, in the open. For example, the git repository for the
proposal, as well as progress trackers for tasks and deliverables are
hosted publicly on github. This has proven a strong feature to get
early feedback from the community.


%Computational experiments have led to new conjectures which have had a deep impact on the future development of
%mathematics. An outstanding example is the Birch and Swinnerton-Dyer conjecture (one of the Clay Millennium Problems).
%Databases relying on computer calculations such as the Small Groups Library in GAP, the Modular Atlas in group and rep-
%resentation theory, or the LMFDB, provide indispensable tools for researchers. A constructive way of understanding proofs
%%of deep theorems yields algorithmic tools to deal with highly abstract concepts. These tools make the concepts available
%to a broader class of researchers, with many potential applications. A prominent example from algebraic geometry is the
%desingularisation theorem of Hironaka, for which Hironaka won the Fields Medal, and its algorithmisation by Villamayor.


\section{Integrating Mathematical Software Systems via the Math-in-the-Middle Approach}

% Mathematics has a rich notion of data: it can be either numeric or symbolic data;
% knowledge about mathematical objects given as statements (definitions, theorems or
% proofs); or software that computes with these mathematical objects. All this data is
% really a common resource, and should be maintained as such


To achieve the goal of assembling the ecosystem of mathematical software systems in the
\pn project into a coherent mathematical VRE, we have to make the systems interoperable at
a mathematical level. In particular, we have to establish a common meaning space that
allows to share computation, visualization of the mathematical concepts, objects, and
models (COMs) between the respective systems. Building on this we can build a VRE with
classical IDE techniques. 

Concretely, the problem is that the software systems in \pn have their own representations
of and functionalities for the COMs involved. This starts with simple naming issues
(e.g.\ elliptic curves are represented by \lstinline|ec| in the LMFDB, and as
\lstinline|EllipticCurve| in SageMath), persists through the underlying data structures,
and becomes virulent at the level of algorithms, their parameters, and domains of
applicability.


% *** maybe use this above *** 
    % \begin{omtext}[title=Advantages] well-known Open Source Software
    %   \begin{enumerate}
    %   \item Let the specialists do that they do best and like\lec{and avoid what the don't}
    %   \item collaboration exponentiates results
    %   \item competition fosters innovation \lec{+ no vendor lock-in}
    %   \end{enumerate}
    % \end{omtext}


%   \item 
%     \begin{omtext}[title=Problem]
%       does an elliptic curve mean the same in GAP, SAGE, LMFDB?
%       \begin{itemize}
%       \item otherwise delegating computation becomes unsound
%       \item storing data in a central KB becomes unsafe 
%       \item the user cannot interpret the results in an UI
%       \end{itemize}
%     \end{omtext}
% \item
%     \begin{omtext}[title=Idea]
%       Need a common meaning space for safe distributed computation in a VRE!
%     \end{omtext}

\ednote{MK: essentially the St.\ Andrews stuff}
% outline:
% - MMT: distributed nature, flexibility, 
% - 

\input{multisystem-semantic-handle-interfaces.tex}

\input{gap-type-system.tex}

\input{presenting-lmfdb.tex}

\section{Conclusion}
\ednote{MK: I am not sure we need this, but we will see}
\subsubsection*{Acknowledgements}
The authors gratefully acknowledge discussions and experimentation at the St.\ Andrews
workshop, which clarified the ideas behind the math-in-the-middle approach;
in particular John Cremona, Paul-Olivier Dehaye, Luca de Feo, Mihnea Iancu, Alexander
Konovalov, Samuel Leli\`evre, Steve Linton, Dennis M\"uller, Markus Pfeiffer, Viviane Pons,
Florian Rabe, and Tom Wiesing.

We acknowledge financial support from the OpenDreamKit Horizon 2020 European Research
Infrastructures project (\#676541) and from the EPSRC Collaborative Computational Project
CoDiMa (EP/M022641/1).

\printbibliography
\end{document}
%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:

%  LocalWords:  maketitle endeavor ednote ODKproposal printbibliography subsubsection
